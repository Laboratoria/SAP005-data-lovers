System.register(["./chunk-vendor.js","./chunk-frameworks.js"],(function(){"use strict";var e,t,o,n,s,r,a,c,i,u,l,d,m,p,g,j,f,y;return{setters:[function(n){e=n.a,t=n.d,o=n.o},function(e){n=e.b1,s=e.b2,r=e.b3,a=e.b4,c=e.Y,i=e.b5,u=e.P,l=e.Q,d=e.T,m=e.b6,p=e.o,g=e.r,j=e.ay,f=e.az,y=e.aV}],execute:function(){function h(e,t){const o=new URL(e,window.location.origin),n=new URLSearchParams(o.search.slice(1));n.set("q",t);const s=new URLSearchParams(window.location.search).get("type");return s&&n.set("type",s),o.search=n.toString(),o.toString()}function b(e){let t;const[o,n]=e.name.split("/")||[];switch(e.type){case"Project":t=a(e.owner.name,""+e.number);break;case"Repository":t=r(o,n);break;case"Team":t=s(o,n);break;default:throw new Error("Invalid Suggestion type: "+e.type)}return t}let v,S={};function x(e){const t=e.getAttribute("data-target-type");if("Search"===t){const t=document.querySelector(".js-site-search-form"),o=t.getAttribute("data-scope-type"),n="true"===t.getAttribute("data-flagged-in")?e.getAttribute("data-item-type"):"";o&&w({dimensions:{scope_id:parseInt(t.getAttribute("data-scope-id")||""),scope_type:o,target_scope:n||""}}),q("search")}else"Project"!==t&&"Repository"!==t&&"Team"!==t||(w({dimensions:{target_id:parseInt(e.getAttribute("data-target-id")||""),target_type:t,target_scope:""},measures:{client_rank:parseInt(e.getAttribute("data-client-rank")||""),server_rank:parseInt(e.getAttribute("data-server-rank")||"")}}),q("click"))}function q(e){var t,o;const n=parseInt((null===(o=null===(t=document.head)||void 0===t?void 0:t.querySelector('meta[name="octolytics-actor-id"]'))||void 0===o?void 0:o.content)||"");if(!n)return!1;S.dimensions=S.dimensions||{},S.dimensions.actor_id=n;let s=S.dimensions&&S.dimensions.session_id;return("menu-activation"!==e||!s)&&(!("menu-activation"!==e&&!s)&&("menu-activation"===e&&(s="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){const t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)})),w({dimensions:{session_id:s}})),S.event_type="jump-to-"+e,!!s&&(c(S),"menu-deactivation"!==e&&"click"!==e&&"search"!==e||(S={}),!0)))}function w(e){e.context&&(S.context=Object.assign(S.context||{},e.context),S.dimensions=Object.assign(S.dimensions||{},e.context)),e.dimensions&&(S.dimensions=Object.assign(S.dimensions||{},e.dimensions)),e.measures&&(S.measures=Object.assign(S.measures||{},e.measures))}function L(e){document.querySelector(".js-jump-to-suggestions-container").classList.remove("d-none"),e.classList.add("jump-to-dropdown-visible"),document.querySelector(".js-jump-to").setAttribute("aria-expanded","true")}function A(){document.querySelector(".js-jump-to-suggestions-container").classList.add("d-none"),document.querySelector(".js-jump-to-field").classList.remove("jump-to-dropdown-visible"),document.querySelector(".js-jump-to").setAttribute("aria-expanded","false"),q("menu-deactivation")}function k(e){const t=e.form,o=document.querySelector(".js-jump-to-suggestions-results-container"),n=e.value.trim(),s=!(!e.form||!e.form.getAttribute("data-scope-type")),r="Repository"===(e.form&&e.form.getAttribute("data-scope-type")),a=o.querySelector(".js-jump-to-scoped-search"),c=o.querySelector(".js-jump-to-owner-scoped-search"),i=o.querySelector(".js-jump-to-global-search");if(a.classList.toggle("d-none",!n||!s),c&&c.classList.toggle("d-none",!n||!r),i.classList.toggle("d-none",!n),n&&s){const e=R(a,n,h(t.getAttribute("action"),n),!0);o.replaceChild(e,a)}if(c&&n&&s){const e=R(c,n,h(t.getAttribute("data-owner-scoped-search-url"),n),!0);o.replaceChild(e,c)}if(n){const e=R(i,n,h(t.getAttribute("data-unscoped-search-url"),n),!1);o.replaceChild(e,i)}}function T(e,t,o){if(!e.form)return;const n=E(".js-jump-to-suggestions-template-container"),s=document.createDocumentFragment();if(o.length<1&&!t)!function(){if(!Boolean(null===(t=null===(e=document.head)||void 0===e?void 0:e.querySelector('meta[name="user-login"]'))||void 0===t?void 0:t.content))return;var e,t;const o=E(".js-jump-to-no-results-template-container").cloneNode(!0);o instanceof HTMLElement&&o.classList.remove("d-none");_(o)}();else{for(const[e,r]of o.entries())s.appendChild(I(n,r,t,e));_(s)}}function _(e){const t=document.querySelector(".js-jump-to-suggestions-results-container");for(const o of t.querySelectorAll(".js-jump-to-suggestion"))o.parentNode.removeChild(o);t.appendChild(e)}function C(e,t){const o=e.querySelector(".js-jump-to-octicon"),n=o.querySelector(t);o.classList.remove("d-none"),n.classList.remove("d-none")}function R(e,t,o,n){const s=e.cloneNode(!0);s.id="jump-to-suggestion-search-"+(n?"scoped":"global");const r=s.querySelector(".js-jump-to-suggestion-path");r.href=o,r.setAttribute("data-target-type","Search");const a=s.querySelector(".js-jump-to-suggestion-name");a.textContent=t,a.setAttribute("aria-label",t),C(s,".js-jump-to-octicon-search");const c=s.querySelector(".js-jump-to-badge-search");return c.classList.remove("d-none"),n?c.querySelector(".js-jump-to-badge-search-text-default").classList.remove("d-none"):c.querySelector(".js-jump-to-badge-search-text-global").classList.remove("d-none"),s}function I(e,t,o,n){const s=e.cloneNode(!0);s.id=`jump-to-suggestion-${t.type.toLowerCase()}-${t.databaseId}`;const r=s.querySelector(".js-jump-to-suggestion-path");r.href=t.path,r.setAttribute("data-target-type",t.type),r.setAttribute("data-target-id",""+t.databaseId),r.setAttribute("data-client-rank",""+n),r.setAttribute("data-server-rank",""+t.rank);const a=s.querySelector(".js-jump-to-suggestion-name");switch(a.textContent=t.name,a.setAttribute("aria-label",t.name),i(a,o.replace(/\s/g,"")),t.type){case"Team":{const e=s.querySelector(".js-jump-to-suggestion-avatar");e.alt=t.name,e.src=t.avatarUrl?t.avatarUrl:"",e.classList.remove("d-none");break}case"Project":C(s,".js-jump-to-octicon-project");break;case"Repository":C(s,".js-jump-to-octicon-repo")}return s.querySelector(".js-jump-to-badge-jump").classList.remove("d-none"),s}function E(e){return document.querySelector(".js-jump-to-suggestions-container").querySelector(e).firstElementChild}function P(e,t){const o=e.value.trim(),s=function(e,t){const o=m(t);return e.sort(((e,t)=>o(t.pageKey)-o(e.pageKey)))}(function(e,t,o){const n=t.replace(/\s/g,"").toLowerCase(),s=e.filter((e=>e.path!==o));return n?u(s,(e=>{const t=e.name,o=d(t,n);return o>0?{score:o,text:t}:null}),l):s}(t,o,window.location.pathname),n()),r=s.slice(0,7);w({measures:{result_count:s.length,display_count:r.length,filter_count:t.length-s.length},context:{query:o,display_set:r.map((e=>[e.type,e.databaseId]))}}),T(e,o,r),q("menu-activation")||q("query")}async function O(e){const t=e.getAttribute("data-jump-to-suggestions-path"),o=function(){const e=new FormData;for(const t of Object.keys(n()))e.append("variables[pageViews][]",t);return e}(),s=y(e,"js-data-jump-to-suggestions-path-csrf");if(!s)return[];let r=[];const a=await fetch(t,{method:"POST",mode:"same-origin",body:o,headers:{Accept:"application/json","Scoped-CSRF-Token":s.value,"X-Requested-With":"XMLHttpRequest"}});a.ok&&(r=function(e){if("errors"in e.data)return[];let t=1;const o=[];for(const n of e.data.suggestions.nodes)null!=n&&(n.rank=t++,n.pageKey=b(n),"Team"===n.type&&(n.name="@"+n.name),o.push(n));return o}(await a.json()));const c=document.querySelector(".js-search-commands");if(c instanceof HTMLInputElement){const e=c.value;let t=[];try{t=JSON.parse(e).commands}catch(i){}r=r.concat(t)}return r}async function U(e){const t=e;!function(e){e.classList.add("js-navigation-enable"),e.classList.add("jump-to-field-active")}(t),L(t),v||(v=O(t)),k(t),N(t),P(t,await v)}e(".js-jump-to-field",{constructor:HTMLInputElement,add(e){e.addEventListener("input",t((async function(){k(e),N(e),P(e,await v)}),100)),document.activeElement&&document.activeElement===e&&U(e)}}),p(".js-jump-to-field",U),o("navigation:keydown",".js-site-search-form",(function(e){const t=e.currentTarget.querySelector(".js-navigation-item.navigation-focus");switch(e.detail.hotkey){case"Enter":if(t)x(t.querySelector(".js-jump-to-suggestion-path"));else{const t=e.currentTarget;g(t)}break;case"Escape":e.currentTarget.querySelector(".js-jump-to-field").blur(),A()}})),o("navigation:focus",".js-site-search-form",(function(e){const t=document.querySelector(".js-jump-to-field"),o=e.target.id,n=e.target.closest(".js-jump-to-suggestions-results-container");for(const s of n.querySelectorAll(".js-navigation-item"))s.setAttribute("aria-selected",(e.target===s).toString());t.setAttribute("aria-activedescendant",o)}));let M=null;function N(e){const t=e.value.trim(),o=document.querySelector(".js-jump-to-suggestions-results-container");t?j(o):f(o)}o("focusout",".js-jump-to",(function(){const e=document.querySelector(".js-jump-to-field");M=window.setTimeout((()=>{!function(e){e.classList.remove("js-navigation-enable"),e.classList.remove("jump-to-field-active")}(e),A()}),200)})),o("focusin",".js-jump-to",(function(){M&&window.clearTimeout(M);L(document.querySelector(".js-jump-to-field"))})),o("click",".js-jump-to-suggestion-path",(function(e){const t=e.currentTarget;if("Search"===t.getAttribute("data-target-type")){const e=document.querySelector(".js-jump-to-field");t.href=function(e,t){const o=new URL(t,window.location.origin),n=new URLSearchParams(o.search.slice(1));return n.get("q")&&n.set("q",e),o.search=n.toString(),o.toString()}(e.value.trim(),t.href)}x(t)})),o("submit",".js-site-search-form",(function(e){if(!document.querySelector(".js-jump-to-field"))return;e.target.getAttribute("data-scoped-search-url")&&w({}),q("search")}))}}}));
//# sourceMappingURL=chunk-jump-to-ed086799.js.map
